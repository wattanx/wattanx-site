---
import type { MarkdownLayoutProps } from "astro";
import { SiteHeader } from "~/components/SiteHeader";
import Layout from "./Layout.astro";

export type Props = {
  title: string;
  image: string;
};

const { frontmatter, headings } =
  Astro.props as unknown as MarkdownLayoutProps<BlogFrontmatter>;

const { title, url, description, image, tags, date } = frontmatter;
---

<Layout title={title} image={image}>
  <SiteHeader borderBottomColor="border-b-yellow-500" />
  <main
    class="flex flex-row space-x-4 px-6 py-14 container mx-auto min-h-screen"
  >
    <article class="bg-gray-800 rounded-lg p-4 w-full">
      <h1 class="text-2xl mb-8">{title}</h1>
      <div class="flex justify-end mb-8">{date}</div>
      <section class="contents">
        <slot />
      </section>
    </article>
    <aside class="w-64 hidden lg:block bg-gray-800 p-4 rounded-lg sticky h-fit">
      <nav aria-labelledby="toc-title">
        <ul>
          {
            headings.map((heading) => (
              <li class={`ml-${heading.depth === 3 ? "4" : "0"}`}>
                <a class="hover:underline" href={`#${heading.slug}`}>
                  {heading.text}
                </a>
              </li>
            ))
          }
        </ul>
      </nav>
    </aside>
  </main>
</Layout>
<style is:global>
  .contents {
    font-size: 15px;
    @apply sm:text-base;
  }

  .contents h1,
  .contents h2,
  .contents h3,
  .contents h4 {
    @apply font-semibold mt-10 mb-1;
  }

  .contents h1 {
    @apply text-2xl;
  }

  .contents h2 {
    @apply text-xl;
  }

  .contents h3 {
    @apply text-lg;
  }

  .contents h4 {
    @apply text-base;
  }

  .contents p {
    @apply my-4;
  }

  .contents strong {
    @apply font-semibold text-yellow-300;
  }
  .contents blockquote {
    @apply px-4 border border-gray-900 border-l-blue-300 border-l-2;
  }

  .contents code:not(pre > *) {
    @apply text-gray-400  bg-gray-900 mx-1 px-1 rounded-sm shadow-lg ring-white/5;
  }

  .contents pre {
    @apply p-4 text-sm rounded-lg my-4;
  }
</style>
